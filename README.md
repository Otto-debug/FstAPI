# ๐ง FastAPI + Telegram Bot Project

## ๐ฆ ะกัะตะบ
- **Backend**: FastAPI + SQLAlchemy + PostgreSQL
- **Bot**: Python Telegram Bot
- **DB**: PostgreSQL (ะฒ ะบะพะฝัะตะนะฝะตัะต)
- **Docker**: ะัะฟะพะปัะทัะตััั `docker-compose` ะดะปั ะฟะพะดะฝััะธั ะฒัะตั ัะตัะฒะธัะพะฒ

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
FstAPI/
โ
โโโ backend/
โ   โโโ app/                 # ะะพะด FastAPI-ะฟัะธะปะพะถะตะฝะธั
โ   โ   โโโ main.py          # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โ   โโโ models.py        # SQLAlchemy ะผะพะดะตะปะธ
โ   โ   โโโ schemas.py       # Pydantic ััะตะผั
โ   โ   โโโ database.py      # ะะพะดะบะปััะตะฝะธะต ะบ ะะ
โ   โ   โโโ auth.py          # JWT ะฐะฒัะพัะธะทะฐัะธั
โ   โ   โโโ utils.py         # ะฅะตะปะฟะตัั (ะฝะฐะฟัะธะผะตั, ัััะธัะพะฒะฐะฝะธะต)
โ   โโโ requirements.txt
โ   โโโ Dockerfile
โ
โโโ bot/
โ   โโโ bot.py               # Telegram-ะฑะพั
โ   โโโ config.py
โ   โโโ database.py
โ   โโโ requirements.txt
โ   โโโ Dockerfile
โ
โโโ .env                     # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
โโโ docker-compose.yml
โโโ README.md
```

## โ๏ธ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (`.env`)

ะกะพะทะดะฐะน ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ะธ ะดะพะฑะฐะฒั:

```
POSTGRES_USER=postgres
POSTGRES_PASSWORD=yourpassword
POSTGRES_DB=fastapi_db

SECRET_KEY=supersecretkey
BOT_TOKEN=your_telegram_bot_token
```

## ๐ณ ะะฐะฟััะบ ะฟัะพะตะบัะฐ

1. ะกะพะฑะตัะธ ะธ ะทะฐะฟัััะธ ะบะพะฝัะตะนะฝะตัั:

```bash
docker-compose up --build
```

2. ะัะพะฒะตัั, ััะพ API ะดะพัััะฟะฝะพ ะฟะพ ะฐะดัะตัั:  
   ๐ http://localhost:8000

## ๐ ะะพัััะฟะฝัะต endpoints

### POST `/register`
ะะตะณะธัััะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั.

**ะัะธะผะตั ะทะฐะฟัะพัะฐ:**
```json
{
  "username": "johndoe",
  "name": "John",
  "password": "secret"
}
```

### POST `/login`
ะััะตะฝัะธัะธะบะฐัะธั ะธ ะฟะพะปััะตะฝะธะต ัะพะบะตะฝะฐ.

**ะัะธะผะตั ะทะฐะฟัะพัะฐ:**
```json
{
  "username": "johndoe",
  "password": "secret"
}
```

**ะัะฒะตั:**
```json
{
  "access_token": "your.jwt.token",
  "token_type": "bearer"
}
```

### POST `/connect-telegram`
ะกะฒัะทะฐัั Telegram ID ั ะฟะพะปัะทะพะฒะฐัะตะปะตะผ (ะฝัะถะตะฝ ัะพะบะตะฝ ะฒ ะทะฐะณะพะปะพะฒะบะต).

**ะะฐะณะพะปะพะฒะพะบ:**  
`Authorization: Bearer <access_token>`

**ะัะธะผะตั ะทะฐะฟัะพัะฐ:**
```json
{
  "telegram_id": 123456789
}
```

## ๐ค Telegram Bot

ะะพั ะฝะฐัะพะดะธััั ะฒ ะฟะฐะฟะบะต `bot/`. ะะฝ ะฟะพะดะบะปััะฐะตััั ะบ ัะพะน ะถะต ะฑะฐะทะต ะดะฐะฝะฝัั ะธ ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัั telegram_id ะดะปั ัะฒัะทะธ ั ะฟะพะปัะทะพะฒะฐัะตะปะตะผ.

## ๐งช ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

### ะััะฐะฝะพะฒะธัั ะธ ัะดะฐะปะธัั ะบะพะฝัะตะนะฝะตัั:
```bash
docker-compose down
```

### ะะตัะตะทะฐะฟััะบ ั ะฟะตัะตัะฑะพัะบะพะน:
```bash
docker-compose up --build
```

## โ TODO
- [ ] ะะพะฑะฐะฒะธัั ะผะธะณัะฐัะธะธ Alembic
- [ ] Docker Healthchecks
- [ ] ะขะตััั (pytest)
- [ ] ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะฒ ะฑะพัะต
